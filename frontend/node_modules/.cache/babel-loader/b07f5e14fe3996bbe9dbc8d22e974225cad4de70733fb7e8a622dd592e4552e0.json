{"ast":null,"code":"var _jsxFileName = \"F:\\\\Workspace\\\\Cursor\\\\game\\\\frontend\\\\src\\\\components\\\\games\\\\ZombieDice.js\",\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport redBrain from '../../assets/zombie-dice/faces/red-brain.png';\nimport redFootsteps from '../../assets/zombie-dice/faces/red-footsteps.png';\nimport redShotgun from '../../assets/zombie-dice/faces/red-shotgun.png';\nimport yellowBrain from '../../assets/zombie-dice/faces/yellow-brain.png';\nimport yellowFootsteps from '../../assets/zombie-dice/faces/yellow-footsteps.png';\nimport yellowShotgun from '../../assets/zombie-dice/faces/yellow-shotgun.png';\nimport greenBrain from '../../assets/zombie-dice/faces/green-brain.png';\nimport greenFootsteps from '../../assets/zombie-dice/faces/green-footsteps.png';\nimport greenShotgun from '../../assets/zombie-dice/faces/green-shotgun.png';\nimport '../styles/ZombieDice.css';\n\n// 승리 점수\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WINNING_SCORE = 13;\n\n// 주사위 면 정의\nconst DICE_FACES = {\n  RED: {\n    faces: [{\n      image: redBrain,\n      type: 'BRAIN'\n    },\n    // 1면\n    {\n      image: redFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 2면\n    {\n      image: redFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 3면\n    {\n      image: redShotgun,\n      type: 'SHOTGUN'\n    },\n    // 4면\n    {\n      image: redShotgun,\n      type: 'SHOTGUN'\n    },\n    // 5면\n    {\n      image: redShotgun,\n      type: 'SHOTGUN'\n    } // 6면\n    ]\n  },\n  YELLOW: {\n    faces: [{\n      image: yellowBrain,\n      type: 'BRAIN'\n    },\n    // 1면\n    {\n      image: yellowBrain,\n      type: 'BRAIN'\n    },\n    // 2면\n    {\n      image: yellowFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 3면\n    {\n      image: yellowFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 4면\n    {\n      image: yellowShotgun,\n      type: 'SHOTGUN'\n    },\n    // 5면\n    {\n      image: yellowShotgun,\n      type: 'SHOTGUN'\n    } // 6면\n    ]\n  },\n  GREEN: {\n    faces: [{\n      image: greenBrain,\n      type: 'BRAIN'\n    },\n    // 1면\n    {\n      image: greenBrain,\n      type: 'BRAIN'\n    },\n    // 2면\n    {\n      image: greenBrain,\n      type: 'BRAIN'\n    },\n    // 3면\n    {\n      image: greenFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 4면\n    {\n      image: greenFootsteps,\n      type: 'FOOTSTEPS'\n    },\n    // 5면\n    {\n      image: greenShotgun,\n      type: 'SHOTGUN'\n    } // 6면\n    ]\n  }\n};\nfunction ZombieDice({\n  players,\n  currentTurn,\n  onTurnEnd,\n  isMyTurn\n}) {\n  _s2();\n  var _s = $RefreshSig$();\n  const [dicePool, setDicePool] = useState([...Array(3).fill('RED'), ...Array(4).fill('YELLOW'), ...Array(6).fill('GREEN')]);\n  const [selectedDice, setSelectedDice] = useState([]);\n  const [rolledResults, setRolledResults] = useState([]);\n  const [currentBrains, setCurrentBrains] = useState(0);\n  const [currentShotguns, setCurrentShotguns] = useState(0);\n  const [keptDice, setKeptDice] = useState([]);\n  const [isRolling, setIsRolling] = useState(false);\n  const diceContainerRef = useRef(null);\n\n  // 주사위 3개 랜덤 선택 함수 수정 - 색상만 선택\n  const pickDice = () => {\n    console.log('주사위 선택 시작, 현재 풀:', dicePool);\n\n    // 주사위 풀에 색상만 있는지 확인\n    const validDicePool = dicePool.filter(dice => dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN');\n    if (validDicePool.length !== dicePool.length) {\n      console.warn('주사위 풀에 잘못된 값이 있습니다. 정리합니다.');\n      setDicePool(validDicePool);\n    }\n    const newDice = [];\n    const tempPool = [...validDicePool];\n\n    // 풀이 비어있으면 초기화하지 않고 로그만 출력\n    if (tempPool.length < 3) {\n      console.error('주사위 풀이 부족합니다:', tempPool);\n      return;\n    }\n    for (let i = 0; i < 3; i++) {\n      if (tempPool.length === 0) break;\n      const randomIndex = Math.floor(Math.random() * tempPool.length);\n      newDice.push(tempPool[randomIndex]);\n      tempPool.splice(randomIndex, 1);\n    }\n    console.log('선택된 주사위:', newDice);\n    console.log('남은 풀:', tempPool);\n\n    // 주사위 풀 업데이트 - 색상만 저장\n    setDicePool(tempPool);\n    setSelectedDice(newDice);\n\n    // 주사위 풀 상태를 서버에 전송\n    const roomId = window.location.pathname.split('/')[2];\n    window.socket.emit('updateDicePool', {\n      roomId,\n      dicePool: tempPool\n    });\n  };\n\n  // 주사위 굴리기\n  const handleRoll = () => {\n    // 선택된 주사위가 없으면 먼저 선택\n    if (selectedDice.length === 0) {\n      pickDice();\n\n      // 주사위를 선택한 후 바로 굴리지 않고 사용자가 다시 버튼을 누르도록 함\n      return;\n    }\n\n    // 선택된 주사위로 굴리기\n    rollDiceWithSelected(selectedDice, dicePool);\n  };\n\n  // 턴이 시작될 때 주사위 풀 초기화만 하고 주사위는 선택하지 않음\n  const resetGameState = () => {\n    console.log('게임 상태 초기화');\n    // 주사위 풀 초기화 - 색상만 저장\n    const initialDicePool = [...Array(3).fill('RED'), ...Array(4).fill('YELLOW'), ...Array(6).fill('GREEN')];\n    setDicePool(initialDicePool);\n    setCurrentBrains(0);\n    setCurrentShotguns(0);\n    setRolledResults([]);\n    setSelectedDice([]); // 선택된 주사위 초기화\n\n    // 주사위 풀 초기화를 서버에 알림\n    if (window.socket) {\n      const roomId = window.location.pathname.split('/')[2];\n      window.socket.emit('updateDicePool', {\n        roomId,\n        dicePool: initialDicePool\n      });\n    }\n  };\n\n  // 결과 처리 함수 수정\n  const processResults = results => {\n    // 결과 계산 - 이전 값에 누적\n    let newBrains = currentBrains;\n    let newShotguns = currentShotguns;\n    results.forEach(({\n      result,\n      type\n    }) => {\n      if (result === 'BRAIN') newBrains++;\n      if (result === 'SHOTGUN') newShotguns++;\n      // 발자국은 처리하지 않음\n    });\n\n    // 상태 업데이트\n    setCurrentBrains(newBrains);\n    setCurrentShotguns(newShotguns);\n\n    // 샷건이 3개 이상이면 자동 턴 종료 제거\n    // 대신 UI에서 계속하기 버튼 비활성화 처리\n  };\n\n  // 턴 종료 함수 수정\n  const handleStop = () => {\n    // 샷건이 3개 이상이면 점수 0으로 처리\n    const finalScore = currentShotguns >= 3 ? 0 : currentBrains;\n\n    // Room 컴포넌트에서 roomId 가져오기\n    const roomId = window.location.pathname.split('/')[2]; // URL에서 roomId 추출\n\n    console.log('턴 종료 요청 전송:', {\n      roomId,\n      score: finalScore\n    });\n\n    // 서버에 턴 종료 요청 전송\n    if (window.socket) {\n      window.socket.emit('endTurn', {\n        roomId,\n        score: finalScore\n      });\n    } else {\n      console.error('소켓 연결이 없습니다!');\n    }\n\n    // 로컬 콜백 호출 (Room 컴포넌트에 알림)\n    onTurnEnd(finalScore);\n  };\n\n  // 계속 진행 함수 수정\n  const handleContinue = () => {\n    // 도망간 주사위 찾기\n    const footstepsDice = rolledResults.filter(result => result.result === 'FOOTSTEPS').map(result => result.type);\n\n    // 새로운 주사위 3개 선택\n    const newSelectedDice = [];\n    let tempPool = [...dicePool];\n\n    // 주사위 풀이 3개 이하인 경우 풀 초기화\n    if (tempPool.length < 3) {\n      console.log('주사위 풀 부족, 풀 초기화');\n\n      // 주사위 풀 초기화 - 색상만 저장\n      tempPool = [...Array(3).fill('RED'), ...Array(4).fill('YELLOW'), ...Array(6).fill('GREEN')];\n\n      // 도망간 주사위 제외\n      footstepsDice.forEach(diceType => {\n        const index = tempPool.indexOf(diceType);\n        if (index !== -1) {\n          tempPool.splice(index, 1);\n        }\n      });\n    }\n\n    // 3개의 새 주사위 선택\n    for (let i = 0; i < 3; i++) {\n      if (tempPool.length === 0) break;\n      const randomIndex = Math.floor(Math.random() * tempPool.length);\n      newSelectedDice.push(tempPool[randomIndex]);\n      tempPool.splice(randomIndex, 1);\n    }\n\n    // 도망간 주사위와 새 주사위 합치기\n    const allDiceToRoll = [...footstepsDice, ...newSelectedDice];\n\n    // 주사위 풀 업데이트 - 색상만 저장\n    setDicePool(tempPool);\n\n    // 주사위 풀 상태를 서버에 전송\n    window.socket.emit('updateDicePool', {\n      roomId: window.location.pathname.split('/')[2],\n      dicePool: tempPool\n    });\n\n    // 이전 결과에서 도망이 아닌 주사위만 유지\n    const nonFootstepsResults = rolledResults.filter(result => result.result !== 'FOOTSTEPS');\n    setRolledResults(nonFootstepsResults);\n\n    // 즉시 주사위 굴리기\n    setTimeout(() => {\n      rollDiceWithSelected(allDiceToRoll, tempPool);\n    }, 100);\n  };\n\n  // 주사위 굴리기 함수 수정 - 서버에서 결과 받기\n  const rollDiceWithSelected = (selectedDiceToRoll, currentPool) => {\n    console.log('주사위 굴리기 시작, 선택된 주사위:', selectedDiceToRoll);\n    console.log('현재 풀:', currentPool);\n    setIsRolling(true);\n\n    // 서버에 주사위 굴리기 요청\n    if (window.socket) {\n      // Room 컴포넌트에서 roomId 가져오기\n      const roomId = window.location.pathname.split('/')[2]; // URL에서 roomId 추출\n\n      console.log('주사위 굴리기 요청 전송:', {\n        action: 'rollDice',\n        roomId,\n        selectedDice: selectedDiceToRoll,\n        dicePool: currentPool\n      });\n      window.socket.emit('gameAction', {\n        action: 'rollDice',\n        roomId,\n        selectedDice: selectedDiceToRoll,\n        dicePool: currentPool\n      });\n    } else {\n      console.error('소켓 연결이 없습니다!');\n      setIsRolling(false);\n    }\n\n    // 서버 응답이 없을 경우를 대비한 타임아웃\n    setTimeout(() => {\n      if (isRolling) {\n        console.error('서버 응답 타임아웃');\n        setIsRolling(false);\n      }\n    }, 5000);\n  };\n\n  // 점수판 렌더링\n  const renderScoreBoard = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"score-board\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD50C\\uB808\\uC774\\uC5B4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uC810\\uC218\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: players.map((player, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: index === currentTurn ? 'current-player' : '',\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: player.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: player.score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, player.nickname, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n\n  // 승자가 있는지 확인\n  const winner = players.find(player => player.score >= WINNING_SCORE);\n\n  // 소켓 이벤트 리스너 수정\n  useEffect(() => {\n    if (window.socket) {\n      console.log('소켓 이벤트 리스너 등록');\n\n      // 게임 시작 이벤트 리스너 추가\n      const handleGameStarted = data => {\n        console.log('게임 시작:', data);\n\n        // 게임 시작 시 주사위 풀 초기화 - 서버에서 받은 값으로 설정\n        if (data.gameState && data.gameState.dicePool) {\n          setDicePool(data.gameState.dicePool);\n        } else {\n          // 서버에서 받은 값이 없으면 기본값으로 설정\n          const initialDicePool = [...Array(3).fill('RED'), ...Array(4).fill('YELLOW'), ...Array(6).fill('GREEN')];\n          setDicePool(initialDicePool);\n        }\n        setCurrentBrains(0);\n        setCurrentShotguns(0);\n        setRolledResults([]);\n        setSelectedDice([]);\n      };\n\n      // 주사위 굴리기 결과 수신 이벤트 리스너 수정\n      const handleGameAction = data => {\n        console.log('게임 액션 수신:', data);\n        if (data.action === 'rollDice') {\n          console.log('주사위 결과 수신:', data.results);\n\n          // 결과 표시 - 새 결과로 설정\n          setRolledResults(data.results);\n          setIsRolling(true); // 모든 플레이어에게 굴리는 애니메이션 표시\n\n          // 주사위 풀 업데이트 - 모든 플레이어에게 동일하게 적용\n          let validDicePool = [];\n          if (data.dicePool) {\n            // 주사위 풀에 주사위 색상만 저장되도록 확인\n            validDicePool = data.dicePool.filter(dice => dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN');\n            setDicePool(validDicePool);\n          }\n\n          // 애니메이션 후 결과 처리 - 모든 플레이어에게 동일한 시간 적용\n          setTimeout(() => {\n            // 내 턴일 때만 결과 처리 (점수 누적)\n            if (isMyTurn) {\n              // 결과 처리 - 뇌와 샷건 개수 누적\n              let newBrains = currentBrains;\n              let newShotguns = currentShotguns;\n              data.results.forEach(({\n                result\n              }) => {\n                if (result === 'BRAIN') newBrains++;\n                if (result === 'SHOTGUN') newShotguns++;\n              });\n\n              // 상태 업데이트\n              setCurrentBrains(newBrains);\n              setCurrentShotguns(newShotguns);\n\n              // 현재 상태를 서버에 전송하여 다른 플레이어들에게도 업데이트\n              window.socket.emit('updateTurnStatus', {\n                roomId: window.location.pathname.split('/')[2],\n                currentBrains: newBrains,\n                currentShotguns: newShotguns,\n                dicePool: validDicePool // 주사위 풀도 함께 전송 (색상만)\n              });\n            }\n            setIsRolling(false);\n          }, 2500); // 모든 플레이어에게 동일한 애니메이션 시간 적용\n        }\n      };\n\n      // 턴 상태 업데이트 이벤트 리스너 추가\n      const handleTurnStatusUpdated = data => {\n        console.log('턴 상태 업데이트:', data);\n\n        // 내 턴이 아닐 때만 상태 업데이트 (내 턴일 때는 이미 로컬에서 처리됨)\n        if (!isMyTurn) {\n          setCurrentBrains(data.currentBrains);\n          setCurrentShotguns(data.currentShotguns);\n\n          // 주사위 풀 업데이트\n          if (data.dicePool) {\n            setDicePool(data.dicePool);\n          }\n        }\n      };\n\n      // 게임 상태 업데이트 이벤트 리스너 수정\n      const handleGameStateUpdated = gameState => {\n        console.log('게임 상태 업데이트:', gameState);\n\n        // 현재 턴이 변경되었는지 확인\n        const isMyTurnChanged = gameState.currentTurn !== currentTurn;\n        if (isMyTurnChanged) {\n          // 턴이 변경되었으면 게임 상태 초기화\n          console.log('턴 변경 감지, 게임 상태 초기화');\n\n          // 주사위 풀 초기화 - 색상만 저장\n          const initialDicePool = [...Array(3).fill('RED'), ...Array(4).fill('YELLOW'), ...Array(6).fill('GREEN')];\n          setDicePool(initialDicePool);\n          setCurrentBrains(0);\n          setCurrentShotguns(0);\n          setRolledResults([]);\n          setSelectedDice([]);\n        } else {\n          // 주사위 풀 업데이트 - 서버 상태로 동기화\n          if (gameState.dicePool) {\n            // 주사위 풀에 주사위 색상만 저장되도록 확인\n            const validDicePool = gameState.dicePool.filter(dice => dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN');\n            setDicePool(validDicePool);\n          }\n        }\n\n        // 턴 상태 업데이트 (서버에서 받은 경우)\n        if (gameState.currentBrains !== undefined && gameState.currentShotguns !== undefined) {\n          setCurrentBrains(gameState.currentBrains);\n          setCurrentShotguns(gameState.currentShotguns);\n        }\n      };\n\n      // 주사위 풀 업데이트 이벤트 리스너 추가\n      const handleDicePoolUpdated = data => {\n        console.log('주사위 풀 업데이트:', data);\n        if (data.dicePool) {\n          setDicePool(data.dicePool);\n        }\n      };\n      window.socket.on('gameStarted', handleGameStarted);\n      window.socket.on('gameAction', handleGameAction);\n      window.socket.on('gameStateUpdated', handleGameStateUpdated);\n      window.socket.on('turnStatusUpdated', handleTurnStatusUpdated);\n      window.socket.on('dicePoolUpdated', handleDicePoolUpdated);\n      return () => {\n        console.log('소켓 이벤트 리스너 제거');\n        window.socket.off('gameStarted', handleGameStarted);\n        window.socket.off('gameAction', handleGameAction);\n        window.socket.off('gameStateUpdated', handleGameStateUpdated);\n        window.socket.off('turnStatusUpdated', handleTurnStatusUpdated);\n        window.socket.off('dicePoolUpdated', handleDicePoolUpdated);\n      };\n    }\n  }, [currentBrains, currentShotguns, currentTurn, isMyTurn, onTurnEnd]);\n\n  // 컴포넌트 마운트/언마운트 시 상태 초기화 수정\n  useEffect(() => {\n    // 내 턴이 시작될 때만 초기화\n    if (isMyTurn) {\n      // 이전에 내 턴이 아니었다면 초기화\n      if (!prevIsMyTurnRef.current) {\n        resetGameState();\n        pickDice();\n      }\n    }\n\n    // 현재 턴 상태 저장\n    prevIsMyTurnRef.current = isMyTurn;\n  }, [isMyTurn]);\n\n  // 이전 턴 상태 저장용 ref 추가\n  const prevIsMyTurnRef = useRef(false);\n\n  // Three.js를 사용한 주사위 컴포넌트\n  function Dice({\n    type,\n    result,\n    isRolling\n  }) {\n    _s();\n    const diceRef = useRef(null);\n    const animationRef = useRef(null);\n    useEffect(() => {\n      // 이전 캔버스 제거\n      while (diceRef.current && diceRef.current.firstChild) {\n        diceRef.current.removeChild(diceRef.current.firstChild);\n      }\n\n      // 씬 설정\n      const scene = new THREE.Scene();\n      scene.background = new THREE.Color(0xf0f0f0);\n\n      // 카메라 설정\n      const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);\n      camera.position.z = 2;\n\n      // 렌더러 설정\n      const renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true\n      });\n      renderer.setSize(150, 150);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      if (diceRef.current) {\n        diceRef.current.appendChild(renderer.domElement);\n      }\n\n      // 조명 추가\n      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);\n      scene.add(ambientLight);\n      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n      directionalLight.position.set(1, 1, 1);\n      scene.add(directionalLight);\n\n      // 텍스처 로더 생성\n      const textureLoader = new THREE.TextureLoader();\n\n      // 결과 타입에 따른 면 매핑\n      const resultIndex = DICE_FACES[type].faces.findIndex(face => face.type === result);\n\n      // 주사위 면 순서: +x, -x, +y, -y, +z, -z\n      // 각 면에 맞는 텍스처 매핑\n      const materials = [];\n\n      // 주사위 타입에 따른 면 이미지 설정\n      let brainImage, footstepsImage, shotgunImage;\n      switch (type) {\n        case 'RED':\n          brainImage = redBrain;\n          footstepsImage = redFootsteps;\n          shotgunImage = redShotgun;\n          break;\n        case 'YELLOW':\n          brainImage = yellowBrain;\n          footstepsImage = yellowFootsteps;\n          shotgunImage = yellowShotgun;\n          break;\n        case 'GREEN':\n          brainImage = greenBrain;\n          footstepsImage = greenFootsteps;\n          shotgunImage = greenShotgun;\n          break;\n      }\n\n      // 결과에 따라 위쪽 면 설정\n      let topFaceImage;\n      switch (result) {\n        case 'BRAIN':\n          topFaceImage = brainImage;\n          break;\n        case 'FOOTSTEPS':\n          topFaceImage = footstepsImage;\n          break;\n        case 'SHOTGUN':\n          topFaceImage = shotgunImage;\n          break;\n      }\n\n      // 각 면에 텍스처 적용\n      // 순서: +x, -x, +y, -y, +z(위), -z\n      const faceImages = [brainImage,\n      // +x\n      footstepsImage,\n      // -x\n      shotgunImage,\n      // +y\n      brainImage,\n      // -y\n      topFaceImage,\n      // +z (위쪽 면 - 결과에 따라 변경)\n      footstepsImage // -z\n      ];\n\n      // 각 면에 텍스처 적용\n      faceImages.forEach(image => {\n        const texture = textureLoader.load(image);\n        texture.colorSpace = THREE.SRGBColorSpace;\n        materials.push(new THREE.MeshStandardMaterial({\n          map: texture,\n          roughness: 0.3,\n          metalness: 0.2\n        }));\n      });\n\n      // 주사위 지오메트리 생성\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\n      const dice = new THREE.Mesh(geometry, materials);\n      scene.add(dice);\n\n      // 초기 회전 설정\n      dice.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);\n\n      // 애니메이션 함수\n      const animate = () => {\n        animationRef.current = requestAnimationFrame(animate);\n        if (isRolling) {\n          // 굴러가는 애니메이션\n          dice.rotation.x += 0.1;\n          dice.rotation.y += 0.15;\n          dice.rotation.z += 0.05;\n        } else {\n          // 결과에 따른 회전 설정 - 항상 +z 면이 위로 오도록\n          const targetX = 0;\n          const targetY = 0;\n          const targetZ = 0;\n\n          // 부드러운 회전 애니메이션\n          dice.rotation.x += (targetX - dice.rotation.x) * 0.1;\n          dice.rotation.y += (targetY - dice.rotation.y) * 0.1;\n          dice.rotation.z += (targetZ - dice.rotation.z) * 0.1;\n        }\n        renderer.render(scene, camera);\n      };\n      animate();\n\n      // 클린업\n      return () => {\n        cancelAnimationFrame(animationRef.current);\n        if (diceRef.current && renderer.domElement) {\n          diceRef.current.removeChild(renderer.domElement);\n        }\n        geometry.dispose();\n        materials.forEach(material => material.dispose());\n        renderer.dispose();\n      };\n    }, [isRolling, result, type]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dice-result-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: diceRef,\n        className: \"dice-3d-container\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dice-result-label\",\n        children: [result === 'BRAIN' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"result-brain\",\n          children: \"\\uB1CC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 34\n        }, this), result === 'SHOTGUN' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"result-shotgun\",\n          children: \"\\uCD1D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 36\n        }, this), result === 'FOOTSTEPS' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"result-footsteps\",\n          children: \"\\uBC1C\\uC790\\uAD6D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 주사위 풀 상태 표시 컴포넌트 수정\n  _s(Dice, \"F1LKHxQtkm8Is5hiJbdZTIYH4mI=\");\n  const DicePoolStatus = ({\n    dicePool\n  }) => {\n    // 주사위 색상별 개수 계산\n    const redCount = dicePool.filter(dice => dice === 'RED').length;\n    const yellowCount = dicePool.filter(dice => dice === 'YELLOW').length;\n    const greenCount = dicePool.filter(dice => dice === 'GREEN').length;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dice-pool-status mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"\\uB0A8\\uC740 \\uC8FC\\uC0AC\\uC704:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dice-pool-counts\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dice-count red\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dice-color-indicator red\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 13\n          }, this), \"\\uBE68\\uAC04\\uC0C9: \", redCount, \"\\uAC1C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dice-count yellow\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dice-color-indicator yellow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 13\n          }, this), \"\\uB178\\uB780\\uC0C9: \", yellowCount, \"\\uAC1C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dice-count green\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dice-color-indicator green\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 13\n          }, this), \"\\uCD08\\uB85D\\uC0C9: \", greenCount, \"\\uAC1C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 7\n    }, this);\n  };\n  if (!isMyTurn) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"zombie-dice\",\n      children: [renderScoreBoard(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [players[currentTurn].nickname, \"\\uB2D8\\uC758 \\uCC28\\uB840\\uC785\\uB2C8\\uB2E4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"current-status mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uD68D\\uB4DD\\uD55C \\uB1CC: \", currentBrains]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uC0F7\\uAC74 \\uD69F\\uC218: \", currentShotguns, \"/3\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dice-area mb-3\",\n        children: isRolling ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC8FC\\uC0AC\\uC704 \\uAD74\\uB9AC\\uB294 \\uC911...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 13\n        }, this) : rolledResults.length > 0 && rolledResults.map((result, index) => /*#__PURE__*/_jsxDEV(Dice, {\n          type: result.type,\n          result: result.result,\n          isRolling: isRolling\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DicePoolStatus, {\n        dicePool: dicePool\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"zombie-dice\",\n    children: [renderScoreBoard(), winner ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"\\uD83C\\uDFC6 \", winner.nickname, \"\\uB2D8\\uC774 \\uC2B9\\uB9AC\\uD558\\uC168\\uC2B5\\uB2C8\\uB2E4! \\uD83C\\uDFC6\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 742,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"my-turn-indicator\",\n          children: \"\\uB2F9\\uC2E0\\uC758 \\uCC28\\uB840\\uC785\\uB2C8\\uB2E4!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 747,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"current-status mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uD68D\\uB4DD\\uD55C \\uB1CC: \", currentBrains]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 753,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uC0F7\\uAC74 \\uD69F\\uC218: \", currentShotguns, \"/3\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 752,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dice-area mb-3\",\n        children: isRolling ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC8FC\\uC0AC\\uC704 \\uAD74\\uB9AC\\uB294 \\uC911...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 15\n        }, this) : rolledResults.length > 0 ? rolledResults.map((result, index) => /*#__PURE__*/_jsxDEV(Dice, {\n          type: result.type,\n          result: result.result,\n          isRolling: isRolling\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 19\n        }, this)) :\n        /*#__PURE__*/\n        // 주사위 굴리기 버튼 항상 표시\n        _jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleRoll,\n          disabled: isRolling,\n          children: \"\\uC8FC\\uC0AC\\uC704 \\uAD74\\uB9AC\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 11\n      }, this), rolledResults.length > 0 && !winner && !isRolling && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success me-2\",\n          onClick: handleContinue,\n          disabled: currentShotguns >= 3,\n          children: \"\\uACC4\\uC18D\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: handleStop,\n          children: currentShotguns >= 3 ? \"턴 종료 (0점)\" : \"멈추기\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 13\n      }, this), currentShotguns >= 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\uCD1D\\uC774 3\\uAC1C \\uC774\\uC0C1!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 15\n        }, this), \" \\uC774\\uBC88 \\uD134\\uC5D0 \\uD68D\\uB4DD\\uD55C \\uB1CC\\uB97C \\uBAA8\\uB450 \\uC783\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uD134\\uC744 \\uC885\\uB8CC\\uD574\\uC8FC\\uC138\\uC694.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(DicePoolStatus, {\n        dicePool: dicePool\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 810,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 738,\n    columnNumber: 5\n  }, this);\n}\n_s2(ZombieDice, \"wyq7RmhjSdv4+oD1KiZtHfhxA/Y=\");\n_c = ZombieDice;\nexport default ZombieDice;\nvar _c;\n$RefreshReg$(_c, \"ZombieDice\");","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","THREE","GLTFLoader","redBrain","redFootsteps","redShotgun","yellowBrain","yellowFootsteps","yellowShotgun","greenBrain","greenFootsteps","greenShotgun","jsxDEV","_jsxDEV","Fragment","_Fragment","WINNING_SCORE","DICE_FACES","RED","faces","image","type","YELLOW","GREEN","ZombieDice","players","currentTurn","onTurnEnd","isMyTurn","_s2","_s","$RefreshSig$","dicePool","setDicePool","Array","fill","selectedDice","setSelectedDice","rolledResults","setRolledResults","currentBrains","setCurrentBrains","currentShotguns","setCurrentShotguns","keptDice","setKeptDice","isRolling","setIsRolling","diceContainerRef","pickDice","console","log","validDicePool","filter","dice","length","warn","newDice","tempPool","error","i","randomIndex","Math","floor","random","push","splice","roomId","window","location","pathname","split","socket","emit","handleRoll","rollDiceWithSelected","resetGameState","initialDicePool","processResults","results","newBrains","newShotguns","forEach","result","handleStop","finalScore","score","handleContinue","footstepsDice","map","newSelectedDice","diceType","index","indexOf","allDiceToRoll","nonFootstepsResults","setTimeout","selectedDiceToRoll","currentPool","action","renderScoreBoard","className","children","fileName","_jsxFileName","lineNumber","columnNumber","player","nickname","winner","find","handleGameStarted","data","gameState","handleGameAction","handleTurnStatusUpdated","handleGameStateUpdated","isMyTurnChanged","undefined","handleDicePoolUpdated","on","off","prevIsMyTurnRef","current","Dice","diceRef","animationRef","firstChild","removeChild","scene","Scene","background","Color","camera","PerspectiveCamera","position","z","renderer","WebGLRenderer","antialias","alpha","setSize","setPixelRatio","devicePixelRatio","appendChild","domElement","ambientLight","AmbientLight","add","directionalLight","DirectionalLight","set","textureLoader","TextureLoader","resultIndex","findIndex","face","materials","brainImage","footstepsImage","shotgunImage","topFaceImage","faceImages","texture","load","colorSpace","SRGBColorSpace","MeshStandardMaterial","roughness","metalness","geometry","BoxGeometry","Mesh","rotation","PI","animate","requestAnimationFrame","x","y","targetX","targetY","targetZ","render","cancelAnimationFrame","dispose","material","ref","DicePoolStatus","redCount","yellowCount","greenCount","onClick","disabled","_c","$RefreshReg$"],"sources":["F:/Workspace/Cursor/game/frontend/src/components/games/ZombieDice.js"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport * as THREE from 'three';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\nimport redBrain from '../../assets/zombie-dice/faces/red-brain.png';\r\nimport redFootsteps from '../../assets/zombie-dice/faces/red-footsteps.png';\r\nimport redShotgun from '../../assets/zombie-dice/faces/red-shotgun.png';\r\nimport yellowBrain from '../../assets/zombie-dice/faces/yellow-brain.png';\r\nimport yellowFootsteps from '../../assets/zombie-dice/faces/yellow-footsteps.png';\r\nimport yellowShotgun from '../../assets/zombie-dice/faces/yellow-shotgun.png';\r\nimport greenBrain from '../../assets/zombie-dice/faces/green-brain.png';\r\nimport greenFootsteps from '../../assets/zombie-dice/faces/green-footsteps.png';\r\nimport greenShotgun from '../../assets/zombie-dice/faces/green-shotgun.png';\r\nimport '../styles/ZombieDice.css';\r\n\r\n// 승리 점수\r\nconst WINNING_SCORE = 13;\r\n\r\n// 주사위 면 정의\r\nconst DICE_FACES = {\r\n  RED: {\r\n    faces: [\r\n      { image: redBrain, type: 'BRAIN' },      // 1면\r\n      { image: redFootsteps, type: 'FOOTSTEPS' }, // 2면\r\n      { image: redFootsteps, type: 'FOOTSTEPS' }, // 3면\r\n      { image: redShotgun, type: 'SHOTGUN' },   // 4면\r\n      { image: redShotgun, type: 'SHOTGUN' },   // 5면\r\n      { image: redShotgun, type: 'SHOTGUN' }    // 6면\r\n    ]\r\n  },\r\n  YELLOW: {\r\n    faces: [\r\n      { image: yellowBrain, type: 'BRAIN' },     // 1면\r\n      { image: yellowBrain, type: 'BRAIN' },     // 2면\r\n      { image: yellowFootsteps, type: 'FOOTSTEPS' }, // 3면\r\n      { image: yellowFootsteps, type: 'FOOTSTEPS' }, // 4면\r\n      { image: yellowShotgun, type: 'SHOTGUN' },  // 5면\r\n      { image: yellowShotgun, type: 'SHOTGUN' }   // 6면\r\n    ]\r\n  },\r\n  GREEN: {\r\n    faces: [\r\n      { image: greenBrain, type: 'BRAIN' },     // 1면\r\n      { image: greenBrain, type: 'BRAIN' },     // 2면\r\n      { image: greenBrain, type: 'BRAIN' },     // 3면\r\n      { image: greenFootsteps, type: 'FOOTSTEPS' }, // 4면\r\n      { image: greenFootsteps, type: 'FOOTSTEPS' }, // 5면\r\n      { image: greenShotgun, type: 'SHOTGUN' }   // 6면\r\n    ]\r\n  }\r\n};\r\n\r\nfunction ZombieDice({ players, currentTurn, onTurnEnd, isMyTurn }) {\r\n  const [dicePool, setDicePool] = useState([\r\n    ...Array(3).fill('RED'),\r\n    ...Array(4).fill('YELLOW'),\r\n    ...Array(6).fill('GREEN')\r\n  ]);\r\n  const [selectedDice, setSelectedDice] = useState([]);\r\n  const [rolledResults, setRolledResults] = useState([]);\r\n  const [currentBrains, setCurrentBrains] = useState(0);\r\n  const [currentShotguns, setCurrentShotguns] = useState(0);\r\n  const [keptDice, setKeptDice] = useState([]);\r\n  const [isRolling, setIsRolling] = useState(false);\r\n  const diceContainerRef = useRef(null);\r\n\r\n  // 주사위 3개 랜덤 선택 함수 수정 - 색상만 선택\r\n  const pickDice = () => {\r\n    console.log('주사위 선택 시작, 현재 풀:', dicePool);\r\n    \r\n    // 주사위 풀에 색상만 있는지 확인\r\n    const validDicePool = dicePool.filter(dice => \r\n      dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN'\r\n    );\r\n    \r\n    if (validDicePool.length !== dicePool.length) {\r\n      console.warn('주사위 풀에 잘못된 값이 있습니다. 정리합니다.');\r\n      setDicePool(validDicePool);\r\n    }\r\n    \r\n    const newDice = [];\r\n    const tempPool = [...validDicePool];\r\n    \r\n    // 풀이 비어있으면 초기화하지 않고 로그만 출력\r\n    if (tempPool.length < 3) {\r\n      console.error('주사위 풀이 부족합니다:', tempPool);\r\n      return;\r\n    }\r\n    \r\n    for (let i = 0; i < 3; i++) {\r\n      if (tempPool.length === 0) break;\r\n      const randomIndex = Math.floor(Math.random() * tempPool.length);\r\n      newDice.push(tempPool[randomIndex]);\r\n      tempPool.splice(randomIndex, 1);\r\n    }\r\n    \r\n    console.log('선택된 주사위:', newDice);\r\n    console.log('남은 풀:', tempPool);\r\n    \r\n    // 주사위 풀 업데이트 - 색상만 저장\r\n    setDicePool(tempPool);\r\n    setSelectedDice(newDice);\r\n    \r\n    // 주사위 풀 상태를 서버에 전송\r\n    const roomId = window.location.pathname.split('/')[2];\r\n    window.socket.emit('updateDicePool', {\r\n      roomId,\r\n      dicePool: tempPool\r\n    });\r\n  };\r\n\r\n  // 주사위 굴리기\r\n  const handleRoll = () => {\r\n    // 선택된 주사위가 없으면 먼저 선택\r\n    if (selectedDice.length === 0) {\r\n      pickDice();\r\n      \r\n      // 주사위를 선택한 후 바로 굴리지 않고 사용자가 다시 버튼을 누르도록 함\r\n      return;\r\n    }\r\n    \r\n    // 선택된 주사위로 굴리기\r\n    rollDiceWithSelected(selectedDice, dicePool);\r\n  };\r\n\r\n  // 턴이 시작될 때 주사위 풀 초기화만 하고 주사위는 선택하지 않음\r\n  const resetGameState = () => {\r\n    console.log('게임 상태 초기화');\r\n    // 주사위 풀 초기화 - 색상만 저장\r\n    const initialDicePool = [\r\n      ...Array(3).fill('RED'),\r\n      ...Array(4).fill('YELLOW'),\r\n      ...Array(6).fill('GREEN')\r\n    ];\r\n    setDicePool(initialDicePool);\r\n    setCurrentBrains(0);\r\n    setCurrentShotguns(0);\r\n    setRolledResults([]);\r\n    setSelectedDice([]); // 선택된 주사위 초기화\r\n    \r\n    // 주사위 풀 초기화를 서버에 알림\r\n    if (window.socket) {\r\n      const roomId = window.location.pathname.split('/')[2];\r\n      window.socket.emit('updateDicePool', {\r\n        roomId,\r\n        dicePool: initialDicePool\r\n      });\r\n    }\r\n  };\r\n\r\n  // 결과 처리 함수 수정\r\n  const processResults = (results) => {\r\n    // 결과 계산 - 이전 값에 누적\r\n    let newBrains = currentBrains;\r\n    let newShotguns = currentShotguns;\r\n    \r\n    results.forEach(({ result, type }) => {\r\n      if (result === 'BRAIN') newBrains++;\r\n      if (result === 'SHOTGUN') newShotguns++;\r\n      // 발자국은 처리하지 않음\r\n    });\r\n\r\n    // 상태 업데이트\r\n    setCurrentBrains(newBrains);\r\n    setCurrentShotguns(newShotguns);\r\n    \r\n    // 샷건이 3개 이상이면 자동 턴 종료 제거\r\n    // 대신 UI에서 계속하기 버튼 비활성화 처리\r\n  };\r\n\r\n  // 턴 종료 함수 수정\r\n  const handleStop = () => {\r\n    // 샷건이 3개 이상이면 점수 0으로 처리\r\n    const finalScore = currentShotguns >= 3 ? 0 : currentBrains;\r\n    \r\n    // Room 컴포넌트에서 roomId 가져오기\r\n    const roomId = window.location.pathname.split('/')[2]; // URL에서 roomId 추출\r\n    \r\n    console.log('턴 종료 요청 전송:', {\r\n      roomId,\r\n      score: finalScore\r\n    });\r\n    \r\n    // 서버에 턴 종료 요청 전송\r\n    if (window.socket) {\r\n      window.socket.emit('endTurn', {\r\n        roomId,\r\n        score: finalScore\r\n      });\r\n    } else {\r\n      console.error('소켓 연결이 없습니다!');\r\n    }\r\n    \r\n    // 로컬 콜백 호출 (Room 컴포넌트에 알림)\r\n    onTurnEnd(finalScore);\r\n  };\r\n\r\n  // 계속 진행 함수 수정\r\n  const handleContinue = () => {\r\n    // 도망간 주사위 찾기\r\n    const footstepsDice = rolledResults\r\n      .filter(result => result.result === 'FOOTSTEPS')\r\n      .map(result => result.type);\r\n    \r\n    // 새로운 주사위 3개 선택\r\n    const newSelectedDice = [];\r\n    let tempPool = [...dicePool];\r\n    \r\n    // 주사위 풀이 3개 이하인 경우 풀 초기화\r\n    if (tempPool.length < 3) {\r\n      console.log('주사위 풀 부족, 풀 초기화');\r\n      \r\n      // 주사위 풀 초기화 - 색상만 저장\r\n      tempPool = [\r\n        ...Array(3).fill('RED'),\r\n        ...Array(4).fill('YELLOW'),\r\n        ...Array(6).fill('GREEN')\r\n      ];\r\n      \r\n      // 도망간 주사위 제외\r\n      footstepsDice.forEach(diceType => {\r\n        const index = tempPool.indexOf(diceType);\r\n        if (index !== -1) {\r\n          tempPool.splice(index, 1);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // 3개의 새 주사위 선택\r\n    for (let i = 0; i < 3; i++) {\r\n      if (tempPool.length === 0) break;\r\n      const randomIndex = Math.floor(Math.random() * tempPool.length);\r\n      newSelectedDice.push(tempPool[randomIndex]);\r\n      tempPool.splice(randomIndex, 1);\r\n    }\r\n    \r\n    // 도망간 주사위와 새 주사위 합치기\r\n    const allDiceToRoll = [...footstepsDice, ...newSelectedDice];\r\n    \r\n    // 주사위 풀 업데이트 - 색상만 저장\r\n    setDicePool(tempPool);\r\n    \r\n    // 주사위 풀 상태를 서버에 전송\r\n    window.socket.emit('updateDicePool', {\r\n      roomId: window.location.pathname.split('/')[2],\r\n      dicePool: tempPool\r\n    });\r\n    \r\n    // 이전 결과에서 도망이 아닌 주사위만 유지\r\n    const nonFootstepsResults = rolledResults.filter(result => result.result !== 'FOOTSTEPS');\r\n    setRolledResults(nonFootstepsResults);\r\n    \r\n    // 즉시 주사위 굴리기\r\n    setTimeout(() => {\r\n      rollDiceWithSelected(allDiceToRoll, tempPool);\r\n    }, 100);\r\n  };\r\n\r\n  // 주사위 굴리기 함수 수정 - 서버에서 결과 받기\r\n  const rollDiceWithSelected = (selectedDiceToRoll, currentPool) => {\r\n    console.log('주사위 굴리기 시작, 선택된 주사위:', selectedDiceToRoll);\r\n    console.log('현재 풀:', currentPool);\r\n    \r\n    setIsRolling(true);\r\n    \r\n    // 서버에 주사위 굴리기 요청\r\n    if (window.socket) {\r\n      // Room 컴포넌트에서 roomId 가져오기\r\n      const roomId = window.location.pathname.split('/')[2]; // URL에서 roomId 추출\r\n      \r\n      console.log('주사위 굴리기 요청 전송:', {\r\n        action: 'rollDice',\r\n        roomId,\r\n        selectedDice: selectedDiceToRoll,\r\n        dicePool: currentPool\r\n      });\r\n      \r\n      window.socket.emit('gameAction', {\r\n        action: 'rollDice',\r\n        roomId,\r\n        selectedDice: selectedDiceToRoll,\r\n        dicePool: currentPool\r\n      });\r\n    } else {\r\n      console.error('소켓 연결이 없습니다!');\r\n      setIsRolling(false);\r\n    }\r\n    \r\n    // 서버 응답이 없을 경우를 대비한 타임아웃\r\n    setTimeout(() => {\r\n      if (isRolling) {\r\n        console.error('서버 응답 타임아웃');\r\n        setIsRolling(false);\r\n      }\r\n    }, 5000);\r\n  };\r\n\r\n  // 점수판 렌더링\r\n  const renderScoreBoard = () => (\r\n    <div className=\"score-board\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>플레이어</th>\r\n            <th>점수</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {players.map((player, index) => (\r\n            <tr \r\n              key={player.nickname}\r\n              className={index === currentTurn ? 'current-player' : ''}\r\n            >\r\n              <td>{player.nickname}</td>\r\n              <td>{player.score}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  // 승자가 있는지 확인\r\n  const winner = players.find(player => player.score >= WINNING_SCORE);\r\n\r\n  // 소켓 이벤트 리스너 수정\r\n  useEffect(() => {\r\n    if (window.socket) {\r\n      console.log('소켓 이벤트 리스너 등록');\r\n      \r\n      // 게임 시작 이벤트 리스너 추가\r\n      const handleGameStarted = (data) => {\r\n        console.log('게임 시작:', data);\r\n        \r\n        // 게임 시작 시 주사위 풀 초기화 - 서버에서 받은 값으로 설정\r\n        if (data.gameState && data.gameState.dicePool) {\r\n          setDicePool(data.gameState.dicePool);\r\n        } else {\r\n          // 서버에서 받은 값이 없으면 기본값으로 설정\r\n          const initialDicePool = [\r\n            ...Array(3).fill('RED'),\r\n            ...Array(4).fill('YELLOW'),\r\n            ...Array(6).fill('GREEN')\r\n          ];\r\n          setDicePool(initialDicePool);\r\n        }\r\n        \r\n        setCurrentBrains(0);\r\n        setCurrentShotguns(0);\r\n        setRolledResults([]);\r\n        setSelectedDice([]);\r\n      };\r\n      \r\n      // 주사위 굴리기 결과 수신 이벤트 리스너 수정\r\n      const handleGameAction = (data) => {\r\n        console.log('게임 액션 수신:', data);\r\n        \r\n        if (data.action === 'rollDice') {\r\n          console.log('주사위 결과 수신:', data.results);\r\n          \r\n          // 결과 표시 - 새 결과로 설정\r\n          setRolledResults(data.results);\r\n          setIsRolling(true); // 모든 플레이어에게 굴리는 애니메이션 표시\r\n          \r\n          // 주사위 풀 업데이트 - 모든 플레이어에게 동일하게 적용\r\n          let validDicePool = [];\r\n          if (data.dicePool) {\r\n            // 주사위 풀에 주사위 색상만 저장되도록 확인\r\n            validDicePool = data.dicePool.filter(dice => \r\n              dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN'\r\n            );\r\n            setDicePool(validDicePool);\r\n          }\r\n          \r\n          // 애니메이션 후 결과 처리 - 모든 플레이어에게 동일한 시간 적용\r\n          setTimeout(() => {\r\n            // 내 턴일 때만 결과 처리 (점수 누적)\r\n            if (isMyTurn) {\r\n              // 결과 처리 - 뇌와 샷건 개수 누적\r\n              let newBrains = currentBrains;\r\n              let newShotguns = currentShotguns;\r\n              \r\n              data.results.forEach(({ result }) => {\r\n                if (result === 'BRAIN') newBrains++;\r\n                if (result === 'SHOTGUN') newShotguns++;\r\n              });\r\n              \r\n              // 상태 업데이트\r\n              setCurrentBrains(newBrains);\r\n              setCurrentShotguns(newShotguns);\r\n              \r\n              // 현재 상태를 서버에 전송하여 다른 플레이어들에게도 업데이트\r\n              window.socket.emit('updateTurnStatus', {\r\n                roomId: window.location.pathname.split('/')[2],\r\n                currentBrains: newBrains,\r\n                currentShotguns: newShotguns,\r\n                dicePool: validDicePool // 주사위 풀도 함께 전송 (색상만)\r\n              });\r\n            }\r\n            \r\n            setIsRolling(false);\r\n          }, 2500); // 모든 플레이어에게 동일한 애니메이션 시간 적용\r\n        }\r\n      };\r\n      \r\n      // 턴 상태 업데이트 이벤트 리스너 추가\r\n      const handleTurnStatusUpdated = (data) => {\r\n        console.log('턴 상태 업데이트:', data);\r\n        \r\n        // 내 턴이 아닐 때만 상태 업데이트 (내 턴일 때는 이미 로컬에서 처리됨)\r\n        if (!isMyTurn) {\r\n          setCurrentBrains(data.currentBrains);\r\n          setCurrentShotguns(data.currentShotguns);\r\n          \r\n          // 주사위 풀 업데이트\r\n          if (data.dicePool) {\r\n            setDicePool(data.dicePool);\r\n          }\r\n        }\r\n      };\r\n      \r\n      // 게임 상태 업데이트 이벤트 리스너 수정\r\n      const handleGameStateUpdated = (gameState) => {\r\n        console.log('게임 상태 업데이트:', gameState);\r\n        \r\n        // 현재 턴이 변경되었는지 확인\r\n        const isMyTurnChanged = gameState.currentTurn !== currentTurn;\r\n        \r\n        if (isMyTurnChanged) {\r\n          // 턴이 변경되었으면 게임 상태 초기화\r\n          console.log('턴 변경 감지, 게임 상태 초기화');\r\n          \r\n          // 주사위 풀 초기화 - 색상만 저장\r\n          const initialDicePool = [\r\n            ...Array(3).fill('RED'),\r\n            ...Array(4).fill('YELLOW'),\r\n            ...Array(6).fill('GREEN')\r\n          ];\r\n          \r\n          setDicePool(initialDicePool);\r\n          setCurrentBrains(0);\r\n          setCurrentShotguns(0);\r\n          setRolledResults([]);\r\n          setSelectedDice([]);\r\n        } else {\r\n          // 주사위 풀 업데이트 - 서버 상태로 동기화\r\n          if (gameState.dicePool) {\r\n            // 주사위 풀에 주사위 색상만 저장되도록 확인\r\n            const validDicePool = gameState.dicePool.filter(dice => \r\n              dice === 'RED' || dice === 'YELLOW' || dice === 'GREEN'\r\n            );\r\n            setDicePool(validDicePool);\r\n          }\r\n        }\r\n        \r\n        // 턴 상태 업데이트 (서버에서 받은 경우)\r\n        if (gameState.currentBrains !== undefined && gameState.currentShotguns !== undefined) {\r\n          setCurrentBrains(gameState.currentBrains);\r\n          setCurrentShotguns(gameState.currentShotguns);\r\n        }\r\n      };\r\n      \r\n      // 주사위 풀 업데이트 이벤트 리스너 추가\r\n      const handleDicePoolUpdated = (data) => {\r\n        console.log('주사위 풀 업데이트:', data);\r\n        \r\n        if (data.dicePool) {\r\n          setDicePool(data.dicePool);\r\n        }\r\n      };\r\n      \r\n      window.socket.on('gameStarted', handleGameStarted);\r\n      window.socket.on('gameAction', handleGameAction);\r\n      window.socket.on('gameStateUpdated', handleGameStateUpdated);\r\n      window.socket.on('turnStatusUpdated', handleTurnStatusUpdated);\r\n      window.socket.on('dicePoolUpdated', handleDicePoolUpdated);\r\n      \r\n      return () => {\r\n        console.log('소켓 이벤트 리스너 제거');\r\n        window.socket.off('gameStarted', handleGameStarted);\r\n        window.socket.off('gameAction', handleGameAction);\r\n        window.socket.off('gameStateUpdated', handleGameStateUpdated);\r\n        window.socket.off('turnStatusUpdated', handleTurnStatusUpdated);\r\n        window.socket.off('dicePoolUpdated', handleDicePoolUpdated);\r\n      };\r\n    }\r\n  }, [currentBrains, currentShotguns, currentTurn, isMyTurn, onTurnEnd]);\r\n\r\n  // 컴포넌트 마운트/언마운트 시 상태 초기화 수정\r\n  useEffect(() => {\r\n    // 내 턴이 시작될 때만 초기화\r\n    if (isMyTurn) {\r\n      // 이전에 내 턴이 아니었다면 초기화\r\n      if (!prevIsMyTurnRef.current) {\r\n        resetGameState();\r\n        pickDice();\r\n      }\r\n    }\r\n    \r\n    // 현재 턴 상태 저장\r\n    prevIsMyTurnRef.current = isMyTurn;\r\n  }, [isMyTurn]);\r\n\r\n  // 이전 턴 상태 저장용 ref 추가\r\n  const prevIsMyTurnRef = useRef(false);\r\n\r\n  // Three.js를 사용한 주사위 컴포넌트\r\n  function Dice({ type, result, isRolling }) {\r\n    const diceRef = useRef(null);\r\n    const animationRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n      // 이전 캔버스 제거\r\n      while (diceRef.current && diceRef.current.firstChild) {\r\n        diceRef.current.removeChild(diceRef.current.firstChild);\r\n      }\r\n\r\n      // 씬 설정\r\n      const scene = new THREE.Scene();\r\n      scene.background = new THREE.Color(0xf0f0f0);\r\n      \r\n      // 카메라 설정\r\n      const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);\r\n      camera.position.z = 2;\r\n      \r\n      // 렌더러 설정\r\n      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n      renderer.setSize(150, 150);\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      if (diceRef.current) {\r\n        diceRef.current.appendChild(renderer.domElement);\r\n      }\r\n\r\n      // 조명 추가\r\n      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);\r\n      scene.add(ambientLight);\r\n      \r\n      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\r\n      directionalLight.position.set(1, 1, 1);\r\n      scene.add(directionalLight);\r\n\r\n      // 텍스처 로더 생성\r\n      const textureLoader = new THREE.TextureLoader();\r\n      \r\n      // 결과 타입에 따른 면 매핑\r\n      const resultIndex = DICE_FACES[type].faces.findIndex(face => face.type === result);\r\n      \r\n      // 주사위 면 순서: +x, -x, +y, -y, +z, -z\r\n      // 각 면에 맞는 텍스처 매핑\r\n      const materials = [];\r\n      \r\n      // 주사위 타입에 따른 면 이미지 설정\r\n      let brainImage, footstepsImage, shotgunImage;\r\n      \r\n      switch(type) {\r\n        case 'RED':\r\n          brainImage = redBrain;\r\n          footstepsImage = redFootsteps;\r\n          shotgunImage = redShotgun;\r\n          break;\r\n        case 'YELLOW':\r\n          brainImage = yellowBrain;\r\n          footstepsImage = yellowFootsteps;\r\n          shotgunImage = yellowShotgun;\r\n          break;\r\n        case 'GREEN':\r\n          brainImage = greenBrain;\r\n          footstepsImage = greenFootsteps;\r\n          shotgunImage = greenShotgun;\r\n          break;\r\n      }\r\n      \r\n      // 결과에 따라 위쪽 면 설정\r\n      let topFaceImage;\r\n      switch(result) {\r\n        case 'BRAIN':\r\n          topFaceImage = brainImage;\r\n          break;\r\n        case 'FOOTSTEPS':\r\n          topFaceImage = footstepsImage;\r\n          break;\r\n        case 'SHOTGUN':\r\n          topFaceImage = shotgunImage;\r\n          break;\r\n      }\r\n      \r\n      // 각 면에 텍스처 적용\r\n      // 순서: +x, -x, +y, -y, +z(위), -z\r\n      const faceImages = [\r\n        brainImage,       // +x\r\n        footstepsImage,   // -x\r\n        shotgunImage,     // +y\r\n        brainImage,       // -y\r\n        topFaceImage,     // +z (위쪽 면 - 결과에 따라 변경)\r\n        footstepsImage    // -z\r\n      ];\r\n      \r\n      // 각 면에 텍스처 적용\r\n      faceImages.forEach(image => {\r\n        const texture = textureLoader.load(image);\r\n        texture.colorSpace = THREE.SRGBColorSpace;\r\n        materials.push(new THREE.MeshStandardMaterial({ \r\n          map: texture,\r\n          roughness: 0.3,\r\n          metalness: 0.2\r\n        }));\r\n      });\r\n      \r\n      // 주사위 지오메트리 생성\r\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\r\n      const dice = new THREE.Mesh(geometry, materials);\r\n      scene.add(dice);\r\n      \r\n      // 초기 회전 설정\r\n      dice.rotation.set(\r\n        Math.random() * Math.PI,\r\n        Math.random() * Math.PI,\r\n        Math.random() * Math.PI\r\n      );\r\n      \r\n      // 애니메이션 함수\r\n      const animate = () => {\r\n        animationRef.current = requestAnimationFrame(animate);\r\n        \r\n        if (isRolling) {\r\n          // 굴러가는 애니메이션\r\n          dice.rotation.x += 0.1;\r\n          dice.rotation.y += 0.15;\r\n          dice.rotation.z += 0.05;\r\n        } else {\r\n          // 결과에 따른 회전 설정 - 항상 +z 면이 위로 오도록\r\n          const targetX = 0;\r\n          const targetY = 0;\r\n          const targetZ = 0;\r\n          \r\n          // 부드러운 회전 애니메이션\r\n          dice.rotation.x += (targetX - dice.rotation.x) * 0.1;\r\n          dice.rotation.y += (targetY - dice.rotation.y) * 0.1;\r\n          dice.rotation.z += (targetZ - dice.rotation.z) * 0.1;\r\n        }\r\n        \r\n        renderer.render(scene, camera);\r\n      };\r\n      \r\n      animate();\r\n      \r\n      // 클린업\r\n      return () => {\r\n        cancelAnimationFrame(animationRef.current);\r\n        if (diceRef.current && renderer.domElement) {\r\n          diceRef.current.removeChild(renderer.domElement);\r\n        }\r\n        geometry.dispose();\r\n        materials.forEach(material => material.dispose());\r\n        renderer.dispose();\r\n      };\r\n    }, [isRolling, result, type]);\r\n    \r\n    return (\r\n      <div className=\"dice-result-container\">\r\n        <div ref={diceRef} className=\"dice-3d-container\"></div>\r\n        <div className=\"dice-result-label\">\r\n          {result === 'BRAIN' && <span className=\"result-brain\">뇌</span>}\r\n          {result === 'SHOTGUN' && <span className=\"result-shotgun\">총</span>}\r\n          {result === 'FOOTSTEPS' && <span className=\"result-footsteps\">발자국</span>}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 주사위 풀 상태 표시 컴포넌트 수정\r\n  const DicePoolStatus = ({ dicePool }) => {\r\n    // 주사위 색상별 개수 계산\r\n    const redCount = dicePool.filter(dice => dice === 'RED').length;\r\n    const yellowCount = dicePool.filter(dice => dice === 'YELLOW').length;\r\n    const greenCount = dicePool.filter(dice => dice === 'GREEN').length;\r\n    \r\n    return (\r\n      <div className=\"dice-pool-status mt-3\">\r\n        <h5>남은 주사위:</h5>\r\n        <div className=\"dice-pool-counts\">\r\n          <div className=\"dice-count red\">\r\n            <span className=\"dice-color-indicator red\"></span>\r\n            빨간색: {redCount}개\r\n          </div>\r\n          <div className=\"dice-count yellow\">\r\n            <span className=\"dice-color-indicator yellow\"></span>\r\n            노란색: {yellowCount}개\r\n          </div>\r\n          <div className=\"dice-count green\">\r\n            <span className=\"dice-color-indicator green\"></span>\r\n            초록색: {greenCount}개\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!isMyTurn) {\r\n    return (\r\n      <div className=\"zombie-dice\">\r\n        {renderScoreBoard()}\r\n        <div className=\"text-center mb-3\">\r\n          <h3>{players[currentTurn].nickname}님의 차례입니다</h3>\r\n        </div>\r\n        \r\n        <div className=\"current-status mb-3\">\r\n          <div className=\"d-flex justify-content-around\">\r\n            <div>획득한 뇌: {currentBrains}</div>\r\n            <div>샷건 횟수: {currentShotguns}/3</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"dice-area mb-3\">\r\n          {isRolling ? (\r\n            <div className=\"text-center\">\r\n              <p>주사위 굴리는 중...</p>\r\n            </div>\r\n          ) : (\r\n            rolledResults.length > 0 && (\r\n              rolledResults.map((result, index) => (\r\n                <Dice \r\n                  key={index}\r\n                  type={result.type}\r\n                  result={result.result}\r\n                  isRolling={isRolling}\r\n                />\r\n              ))\r\n            )\r\n          )}\r\n        </div>\r\n\r\n        <DicePoolStatus dicePool={dicePool} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"zombie-dice\">\r\n      {renderScoreBoard()}\r\n      \r\n      {winner ? (\r\n        <div className=\"alert alert-success text-center\">\r\n          <h3>🏆 {winner.nickname}님이 승리하셨습니다! 🏆</h3>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"text-center mb-3\">\r\n            <h3 className=\"my-turn-indicator\">당신의 차례입니다!</h3>\r\n          </div>\r\n          \r\n          <div className=\"current-status mb-3\">\r\n            <div className=\"d-flex justify-content-around\">\r\n              <div>획득한 뇌: {currentBrains}</div>\r\n              <div>샷건 횟수: {currentShotguns}/3</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dice-area mb-3\">\r\n            {isRolling ? (\r\n              <div className=\"text-center\">\r\n                <p>주사위 굴리는 중...</p>\r\n              </div>\r\n            ) : (\r\n              rolledResults.length > 0 ? (\r\n                rolledResults.map((result, index) => (\r\n                  <Dice \r\n                    key={index}\r\n                    type={result.type}\r\n                    result={result.result}\r\n                    isRolling={isRolling}\r\n                  />\r\n                ))\r\n              ) : (\r\n                // 주사위 굴리기 버튼 항상 표시\r\n                <button \r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleRoll}\r\n                  disabled={isRolling}\r\n                >\r\n                  주사위 굴리기\r\n                </button>\r\n              )\r\n            )}\r\n          </div>\r\n\r\n          {rolledResults.length > 0 && !winner && !isRolling && (\r\n            <div className=\"controls\">\r\n              <button \r\n                className=\"btn btn-success me-2\"\r\n                onClick={handleContinue}\r\n                disabled={currentShotguns >= 3}\r\n              >\r\n                계속하기\r\n              </button>\r\n              <button \r\n                className=\"btn btn-warning\"\r\n                onClick={handleStop}\r\n              >\r\n                {currentShotguns >= 3 ? \"턴 종료 (0점)\" : \"멈추기\"}\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {currentShotguns >= 3 && (\r\n            <div className=\"alert alert-danger mt-3\">\r\n              <strong>총이 3개 이상!</strong> 이번 턴에 획득한 뇌를 모두 잃었습니다. 턴을 종료해주세요.\r\n            </div>\r\n          )}\r\n          \r\n          <DicePoolStatus dicePool={dicePool} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ZombieDice;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}